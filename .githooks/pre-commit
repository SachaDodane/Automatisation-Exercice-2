#!/bin/sh

# VÃ©rifier les fichiers PHP
echo "ğŸ” VÃ©rification du code PHP avec PHPCS..."
composer phpcs

if [ $? -ne 0 ]; then
    echo "âŒ PHPCS a dÃ©tectÃ© des erreurs. Veuillez les corriger avant de commiter."
    exit 1
fi

echo "ğŸ” Analyse du code PHP avec PHPStan..."
composer phpstan

if [ $? -ne 0 ]; then
    echo "âŒ PHPStan a dÃ©tectÃ© des erreurs. Veuillez les corriger avant de commiter."
    exit 1
fi

# VÃ©rifier les fichiers JavaScript
echo "ğŸ” VÃ©rification du code JavaScript avec ESLint..."
npm run lint:js

if [ $? -ne 0 ]; then
    echo "âŒ ESLint a dÃ©tectÃ© des erreurs. Veuillez les corriger avant de commiter."
    exit 1
fi

echo "âœ… Tous les tests sont passÃ©s !"
exit 0
